<!DOCTYPE html>
<html>
<head>
<title>Geogebra - GeoGebra Dynamic Worksheet</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="GeoGebra" />
<style type="text/css"><!--body { font-family:Arial,Helvetica,sans-serif; margin-left:40px }--></style>
  <script type="text/javascript" src="./ggb/deployggb.js"></script>


<!-- GOOGLE ANALYTICS, Remove if you are modifying this html page -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2002081-3', 'ocpu.io');
  ga('send', 'pageview');

</script>

<!-- OCPU lib and depends -->
<script type="text/javascript" src="opencpu/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="opencpu/resize.js"></script>
<script type="text/javascript" src="opencpu/opencpu-0.4.js"></script>

</head>
<body>
<table border="0" width="798">
<tr><td>
<h2>Geogebra and R: Maps in Geogebra</h2>
<p>
</p>

Select map:
<select name="map" id="map">
  <option value="albacete">Albacete</option>
  <option value="granada">Granada</option>
  <option value="jaen">Jaén</option>
</select>
<p>

<form>
<input type="button" value="Load map" onclick="showmap();">
</form>

<form>
<input type="button" value="Add some locations" onclick="locations();">
</form>


<script type="text/javascript">

function showmap(){

	mymap = document.getElementById("map").value;
	

	var req = ocpu.rpc("plotmap", {
		map : mymap
	},
		
         function (output){

	map = document.getElementById("map").value;

	switch(map) {
		case "albacete":
			var polyname="AB";
			break;

		case "granada":
			var polyname="GR";
			break;

		case "jaen":
			var polyname="JA";
			break;

	}


	//for(muni=0;muni<2;muni++)
	for(muni=0;muni<output.length;muni++)
	{

	var cmd="("+(output[muni])[0]+")";
		
	
		for(i=1;i<output[muni].length;i++)
		{
	cmd=cmd+", ("+(output[muni])[i]+")";
		}

	cmd=polyname + (muni+1)+" = Polygon( "+ cmd + " ) ";
	document.ggbApplet.evalCommand(cmd);

	}

//	alert("Remember to zoom in the map!!");

        })

}

function locations(){
	var applet = document.ggbApplet;

	//UTM coordinates have been rescaled by
	//1.- Divide by 50000
	//2.- Take (10.20520, 84.17414) from the previous values

	applet.evalCommand("Nerpio = (1.0122543, 0.2635951)");
	applet.evalCommand("Villarrobledo = (0.4849199, 2.7547825)")
	applet.evalCommand("Abengibre = (2.313622, 2.639326 )");
	applet.evalCommand("Albacete = (1.776460, 2.163983)");

	applet.evalCommand("Jaén = (-1.581829, -0.5230444)");
	applet.evalCommand("Baeza = (-1.02682, -0.07264)");

	applet.evalCommand("Granada = (-1.270559, -1.871963)");

}

</script>

<p>

<div id="applet_container1"></div>

<script type="text/javascript"> 
var applet1 = new GGBApplet({material_id: "S3O26sTq", width:500, height:500}, true);
window.onload = function() {
        applet1.inject('applet_container1', 'preferHTML5');
    }
</script>



<p>
</p>
<p><span style="font-size:small">V. G&#243;mez-Rubio, M.J. Haro-Delicado and F. Parreño-Torres, Created with <a href="http://www.geogebra.org/" target="_blank" >GeoGebra</a></span></p>
</td></tr>
</table><script type="text/javascript">
var ggbApplet = document.ggbApplet;
function ggbOnInit() {}
</script>
</body>
</html>
